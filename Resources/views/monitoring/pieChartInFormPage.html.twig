<div id="pieChart5" class="chart"></div>
<div id="pieChart6" class="chart"></div>
<script>
var data_nb_views = {{ data_nb_views | json_encode() | raw }};
console.log(data_nb_views);
var tmp4 = [];
$.each(data_nb_views, function(k,v){
    data_nb_views[k].value = JSON.parse(data_nb_views[k].value);
    tmp4.push(v);    
});

var data_nb_leads = {{ data_nb_leads | json_encode() | raw }};
console.log(data_nb_leads);
var tmp5 = [];
$.each(data_nb_leads, function(k,v){
    data_nb_leads[k].value = JSON.parse(data_nb_leads[k].value);
    tmp5.push(v);    
});

$( document ).ready(function() {
    //  graph : pie chart
    var pie = new d3pie("pieChart5", {
            "header": {
                    "title": {
                            "text": "Nombre de Views",
                            "fontSize": 24,
                            "font": "open sans"
                    }
            },
            "footer": {
                    "color": "#999999",
                    "fontSize": 10,
                    "font": "open sans",
                    "location": "bottom-left"
            },
            "size": {
                    "canvasHeight": 400,
                    "canvasWidth": 500,
                    "pieOuterRadius": "70%"
            },
            "data": {
                    "sortOrder": "value-asc",
                    "smallSegmentGrouping": {
                            "enabled": true,
                            "value": 3
                    },
                    "content": tmp4
            },
            "labels": {
                    "outer": {
                            "pieDistance": 20
                    },
                    "inner": {
                            "hideWhenLessThanPercentage": 3
                    },
                    "mainLabel": {
                            "fontSize": 11
                    },
                    "percentage": {
                            "color": "#ffffff",
                            "decimalPlaces": 0
                    },
                    "value": {
                            "color": "#adadad",
                            "fontSize": 11
                    },
                    "lines": {
                            "enabled": true
                    },
                    "truncation": {
                            "enabled": true
                    }
            },
            "effects": {
                    "pullOutSegmentOnClick": {
                            "effect": "linear",
                            "speed": 400,
                            "size": 8
                    }
            },
            "misc": {
                    "gradient": {
                            "enabled": true,
                            "percentage": 100
                    }
            }
    });
    //  graph : pie chart
    var pie = new d3pie("pieChart6", {
	"header": {
		"title": {
			"text": "Nombre de Leads ",
			"fontSize": 24,
			"font": "open sans"
		}
	},
	"footer": {
		"color": "#999999",
		"fontSize": 10,
		"font": "open sans",
		"location": "bottom-left"
	},
	"size": {
		"canvasHeight": 400,
		"canvasWidth": 500,
		"pieOuterRadius": "70%"
	},
	"data": {
		"sortOrder": "value-asc",
		"smallSegmentGrouping": {
			"enabled": true,
			"value": 3
		},
		"content": tmp5
	},
	"labels": {
		"outer": {
			"pieDistance": 20
		},
		"inner": {
			"hideWhenLessThanPercentage": 3
		},
		"mainLabel": {
			"fontSize": 11
		},
		"percentage": {
			"color": "#ffffff",
			"decimalPlaces": 0
		},
		"value": {
			"color": "#adadad",
			"fontSize": 11
		},
		"lines": {
			"enabled": true
		},
		"truncation": {
			"enabled": true
		}
	},
	"effects": {
		"pullOutSegmentOnClick": {
			"effect": "linear",
			"speed": 400,
			"size": 8
		}
	},
	"misc": {
		"gradient": {
			"enabled": true,
			"percentage": 100
		}
	}
});
});
</script>
