{# src/Acme/BlogBundle/Resources/views/Blog/index.html.twig #}
{% extends 'TellawLeadsFactoryBundle::base.html.twig' %}
{% block body %}

	<div class="col-md-12">
        <div class="col-md-8">
        <div class="heading-sec" id="intro6">
            <h1>Espace <i>marketing</i></h1>
            <div style="clear:both"></div>
            <div class="titleDescription"><em>xxx </em></div>
        </div>
        </div>
	</div>
    <div class="col-md-12">

        <div class="col-md-3">

            <form class="form-horizontal row-fluid">
                <div id="form">

                    <div class="form-group" id="row-form_name">
                        <label for="form_name"><label for="form_name">Attribut</label></label>
                        <select name="field" class="form-control">
                        {% for leadsfield in leadsfields %}
                            {% if ( field == leadsfield ) %}
                            <option value="{{ leadsfield }}" selected="selected">{{ leadsfield }}</option>
                            {% else %}
                            <option value="{{ leadsfield }}">{{ leadsfield }}</option>
                            {% endif %}
                        {% endfor %}
                        </select>
                    </div>

                    <div class="form-group" id="row-form_name">
                        <label for="form_name"><label for="form_name">Recherche</label></label>
                        <input type="text" name="q" value="{{ q }}" class="form-control"/>
                    </div>

                    <div class="form-group" id="row-form_name">
                        <label for="form_name"><label for="form_name">Champs Ã  afficher</label></label>
                        <textarea name="fieldstodisplay"  class="form-control">{{ fieldsToDisplayRaw }}</textarea>
                    </div>

                    <input type="submit" class="btns blue sml-btn"/>
                </div>
            </form>

        </div>

        {% if (results) %}
        <div class="col-md-5">
            <div class="">
            <table id="stream_table" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        {% for header in fieldsToDisplay %}
                            <th>{{ header }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                {% for lead in results.hits.hits %}
                    <tr>
                        {% for header in fieldsToDisplay %}
                           <td> {{ objectget({'leadsource':lead._source, 'header':header}) }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            </div>
        </div>
        {% endif %}

    </div>

</div>
{% endblock %}
{% block javascript %}

{% endblock %}