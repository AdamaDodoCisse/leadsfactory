parameters:
    theme.bundle: TellawLeadsFactoryBundle
    list.per_page_options: 10;25;50

services:

  messages.utils:
    class:        Tellaw\LeadsFactoryBundle\Utils\Messages
    calls:
                  - [ setContainer, [ @service_container ] ]

  lf.utils:
    class:        Tellaw\LeadsFactoryBundle\Utils\LFUtils
    calls:
                  - [ setContainer, [ @service_container ] ]

  chart:
    class:        Tellaw\LeadsFactoryBundle\Utils\Chart
    calls:
                  - [ setContainer, [ @service_container ] ]

  export.logger:
    class:        Symfony\Bridge\Monolog\Logger
    arguments:    [app]
    calls:
                  - [pushHandler, [@export.logger_handler]]

  export.logger_handler:
    class:        Monolog\Handler\StreamHandler
    arguments:    [%kernel.logs_dir%/%kernel.environment%.export.log, 200]

  export_utils:
    class:        Tellaw\LeadsFactoryBundle\Utils\ExportUtils
    calls:
                  - [ setContainer, [ @service_container ] ]

  csv_method:
    class:        Tellaw\LeadsFactoryBundle\Utils\Export\CSV
    calls:
                  - [ setContainer, [ @service_container ] ]
    tags:
                  - { name: export.method, alias: csv }

  entity_form:
    class:        Tellaw\LeadsFactoryBundle\Form\Type\FormType

  emailFieldType:
    class:        Tellaw\LeadsFactoryBundle\Utils\Fields\EmailFieldType

  form_utils:
    class:        Tellaw\LeadsFactoryBundle\Utils\FormUtils
    calls:
                  - [ setContainer, [ @service_container ] ]

  js_utils:
    class:        Tellaw\LeadsFactoryBundle\Utils\JsUtils
    calls:
                  - [ setContainer, [ @service_container ] ]

  alertes_utils:
    class:        Tellaw\LeadsFactoryBundle\Utils\AlertUtils
    calls:
                  - [ setContainer, [ @service_container ] ]

  leadsfactory.twig_extension:
    class: Tellaw\LeadsFactoryBundle\Twig\LeadsFactoryExtension
    arguments: [@form_utils]
    tags:
      - { name: twig.extension }

  leadsfactory.twig_stringloader_extension:
      class: Twig_Extension_StringLoader
      tags:
        - { name: twig.extension }

  leadsfactory.leads_repository:
    class: Tellaw\LeadsFactoryBundle\Entity\LeadsRepository
    factory_service: doctrine.orm.default_entity_manager
    factory_method: getRepository
    arguments: ['TellawLeadsFactoryBundle:Leads']

  leadsfactory.extract_field_command:
    class: Tellaw\LeadsFactoryBundle\Command\ExtractFieldCommand
    arguments: [@doctrine.orm.entity_manager]
    tags:
    - { name: console.command }
