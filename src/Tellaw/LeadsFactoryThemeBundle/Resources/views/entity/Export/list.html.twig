{# src/Acme/BlogBundle/Resources/views/Blog/index.html.twig #}
{% extends 'TellawLeadsFactoryThemeBundle::base.html.twig' %}
{% block body %}

    <hgroup id="main-title" class="thin">
        <h1>Administration des formulaires</h1>
    </hgroup>

    <div class="columns">

        <div class="eight-columns with-padding">

            <h3 class="thin underline">Liste des formulaires</h3>

                    <table id="sorting-advanced" class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th>Id</th>
                            <th>Formulaire</th>
                            <th>Type</th>
                            <th>Planifié le</th>
                            <th>Exécuté le</th>
                            <th>Lead_Id</th>
                            <th>Méthode</th>
                            <th>Status</th>
                        </tr>
                        </thead>
                        <tbody>

                        {% for job in jobs %}
                            <tr>
                                <td>{{ job.id }}</td>
                                <td>{{ job.form.name }}</td>
                                <td>{{ job.form.formType }}</td>
                                <td>{{ job.scheduledAt.date }}</td>
                                <td>{% if job.executedAt != null %}{{ job.executedAt.date }}{% endif %}</td>
                                <td>{{ job.lead.id }}</td>
                                <td>{{ job.method }}</td>
                                <td>{{ job.status }}</td>
                            </tr>

                        {% else %}
                            <tr>
                                <td colspan="8">Aucun élément.</td>
                            </tr>
                        {% endfor %}

                        </tbody>
                    </table>

        </div>

        <div class="three-columns with-padding">

            <h3 class="thin underline">Actions</h3>

            <p class="button-height">
                <a href="{{ path ('_entity_leads_export') }}" class="button huge full-width green-gradient glossy">&raquo; Exporter</a>
            </p>

        </div>

    </div>

{% endblock %}
{% block javascript %}
    <script>
        // Table sort - DataTables
        var table = $('#sorting-advanced');
        table.dataTable({

            'sPaginationType': 'full_numbers',
            'sDom': '<"dataTables_header"lfr>t<"dataTables_footer"ip>',
            'fnInitComplete': function( oSettings )
            {
                // Style length select
                table.closest('.dataTables_wrapper').find('.dataTables_length select').addClass('select blue-gradient glossy').styleSelect();
                tableStyled = true;
            }
        });
    </script>
{% endblock %}