{# src/Acme/BlogBundle/Resources/views/Blog/index.html.twig #}
{% extends 'TellawLeadsFactoryBundle::base.html.twig' %}
{% block body %}

    <hgroup id="main-title" class="thin">
        <h1>Tous les suivis</h1>
    </hgroup>

    <div class="dashboard">
        {{ form(form) }}
        <!-- Chart -->
        {% if(app.request.get('form')) %}
            {{ render(controller('TellawLeadsFactoryBundle:monitoring:chart', { "period" : app.request.get('form')['period'], "formType":  app.request.get('form')['form_type'] } )) }}
        {% else %}
            {{ render(controller('TellawLeadsFactoryBundle:monitoring:chart')) }}
        {% endif %}
    </div>

{% endblock %}
{% block javascript %}
<script>
    // Table sort - DataTables
    var table = $('#sorting-advanced');
    table.dataTable({

        'sPaginationType': 'full_numbers',
        'sDom': '<"dataTables_header"lfr>t<"dataTables_footer"ip>',
        'fnInitComplete': function( oSettings )
        {
            // Style length select
            table.closest('.dataTables_wrapper').find('.dataTables_length select').addClass('select blue-gradient glossy').styleSelect();
            tableStyled = true;
        }
    });
</script>
{% endblock %}